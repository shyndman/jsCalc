/*! Tosser - v1.0.0 - 2015-02-22
 * http://github.com/shyndman/tosser/
 * Copyright (c) 2015 Scott Hyndman; Licensed MIT */
!function(){function buildMeasurementHtml(){var a=unknownUnits.map(function(a){return'<div class="tosser--'+a+'" style="width:100'+a+'"></div>'});return a.push('<div class="tosser--percent" style="width:100%;height:100%"></div>'),a.join("")}function buildReplacementPattern(){var a=unknownUnits.concat(Object.keys(knownUnits)).join("|");return new RegExp("(\\d+(\\.\\d+)?)("+a+"|%|px)","g")}var tosser=window.tosser={},unknownUnits=["em","ex","ch","rem","vh","vw","vmin","vmax"],knownUnits={mm:96/25.4,cm:96/2.54,"in":96,pt:4/3},verticalStyles={top:!0,height:!0},isCalcPattern=/^calc\(/,measurementHtml=buildMeasurementHtml(),replacementPattern=buildReplacementPattern();tosser.evaluateStyles=function(a,b){var c=b.containerUnits||tosser.resolveContainerUnits(b.container);return Object.keys(a).reduce(function(b,d){var e=a[d];return b[d]=isCalcPattern.test(e)?tosser.evaluateCalc(a[d],{containerUnits:c,vertical:!!verticalStyles[d]}):e,b},b.mutate?a:{})},tosser.evaluateCalc=function(expression,options){var units=options.containerUnits||tosser.resolveContainerUnits(options.container);return eval(expression.trim().replace(/^calc/,"").replace(replacementPattern,function(a,b,c,d){var e=parseFloat(b);switch(d){case"px":return e;case"%":return e*units[options.vertical?"v%":"h%"];default:return e*(units[d]||knownUnits[d])}}))+"px"},tosser.resolveContainerUnits=function(a){var b=document.createElement("tosser-div");b.style.position="absolute",b.style.display="block",b.style.visibility="hidden",b.style.width=b.style.height="100%",b.innerHTML=measurementHtml,a.insertBefore(b,a.firstChild);var c=unknownUnits.reduce(function(b,c){return b[c]=a.querySelector(".tosser--"+c).clientWidth/100,b},{}),d=a.querySelector(".tosser--percent");return c["h%"]=d.clientWidth/100,c["v%"]=d.clientHeight/100,a.removeChild(b),c}}();